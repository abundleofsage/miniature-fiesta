<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OutFront Youth Group - Pueblo, CO</title>
    <link rel="icon" href="favicon.ico" type="image/x-icon">
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;700;800&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        body {
            font-family: 'Poppins', sans-serif;
            background-color: #111827; /* bg-gray-900 */
            color: #E5E7EB; /* text-gray-200 */
            overflow-x: hidden; /* Important to prevent scrollbars from skewed elements */
        }
        .hero-bg {
            background: linear-gradient(45deg, #f87171, #fb923c, #facc15, #a3e635, #4ade80, #38bdf8, #818cf8, #d8b4fe);
            background-size: 400% 400%;
            animation: gradient-animation 15s ease infinite;
        }
        @keyframes gradient-animation {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }
        .glass-card {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        .map-container iframe {
            width: 100%;
            height: 100%;
            border-radius: 1rem;
            border: 0;
        }
        .calendar-event {
            background-color: #a3e635;
            color: #1e293b;
        }
        #calendar-grid {
             min-height: 280px;
        }
        #modal-events-container .event-entry:not(:last-child) {
            border-bottom: 1px solid #4a5568;
            padding-bottom: 1rem;
            margin-bottom: 1rem;
        }
        #modal-events-container .event-description {
            white-space: pre-wrap;
        }
        .rainbow-text {
            background: linear-gradient(45deg, #f87171, #fb923c, #facc15, #a3e635, #4ade80, #38bdf8, #818cf8, #d8b4fe);
            background-size: 200% 200%;
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            animation: gradient-animation 10s ease infinite;
            font-weight: 800;
        }
        /* Angled Section Dividers */
        .angled-section {
            transform: skewY(-2deg);
            margin-top: -4.5rem;
            margin-bottom: -4.5rem;
        }
        .angled-section.alt {
            transform: skewY(2deg);
        }
        .section-content {
            transform: skewY(2deg);
            padding: 9rem 1.5rem;
        }
        .angled-section.alt .section-content {
            transform: skewY(-2deg);
        }
        /* On-Scroll Animations */
        .fade-in-section {
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 0.6s ease-out, transform 0.6s ease-out;
        }
        .fade-in-section.is-visible {
            opacity: 1;
            transform: translateY(0);
        }
        /* Interactive Card Tilt */
        .interactive-card {
            transition: transform 0.3s ease;
        }
        .interactive-card:hover {
            transform: rotate(-2deg) scale(1.02);
        }

        /* Konami Code Easter Egg Animation */
        #konami-logo {
            position: fixed;
            top: 50%;
            left: -200px; /* Start off-screen */
            transform: translateY(-50%);
            width: 150px;
            height: auto;
            z-index: 9999;
            display: none; /* Hidden by default */
            animation: konami-animation 5s linear forwards;
        }

        @keyframes konami-animation {
            0% {
                left: -200px;
                transform: translateY(-50%) rotate(0deg);
            }
            25% {
                left: calc(50% - 75px); /* Move to center */
                transform: translateY(-50%) rotate(360deg);
            }
            50% {
                left: calc(50% - 75px);
                transform: translateY(-50%) rotate(720deg) scale(5); /* Spin and grow */
            }
            75% {
                left: calc(50% - 75px);
                transform: translateY(-50%) rotate(1080deg) scale(1); /* Spin and shrink back */
            }
            100% {
                left: calc(100% + 200px); /* Move off-screen to the right */
                transform: translateY(-50%) rotate(1440deg);
            }
        }

        /* Carousel Styles */
        .carousel-container {
            position: relative;
            max-width: 800px; /* Max width of carousel */
            margin: 2rem auto; /* Spacing above and below, centered */
            overflow: hidden;
            border-radius: 1rem; /* Rounded corners for the container */
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }
        .carousel-slides {
            display: flex; /* Use flexbox for horizontal layout */
            transition: transform 0.5s ease-in-out; /* Smooth transition for slide change */
        }
        .carousel-slide {
            min-width: 100%;
            box-sizing: border-box;
        }
        .carousel-slide img {
            width: 100%;
            height: auto; /* Maintain aspect ratio */
            max-height: 500px; /* Max height for images */
            object-fit: cover; /* Cover the slide area, cropping if necessary */
            display: block;
        }
        .carousel-slide video {
            width: 100%;
            height: auto;
            max-height: 500px;
            object-fit: cover;
            display: block;
        }
        .carousel-button {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            background-color: rgba(0, 0, 0, 0.5);
            color: white;
            border: none;
            padding: 0.75rem; /* Tailwind p-3 */
            cursor: pointer;
            border-radius: 9999px; /* Tailwind rounded-full */
            z-index: 10;
            transition: background-color 0.3s ease;
        }
        .carousel-button:hover {
            background-color: rgba(0, 0, 0, 0.8);
        }
        .carousel-button.prev {
            left: 1rem; /* Tailwind left-4 */
        }
        .carousel-button.next {
            right: 1rem; /* Tailwind right-4 */
        }
        .carousel-dots {
            position: absolute;
            bottom: 1rem; /* Tailwind bottom-4 */
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 0.5rem; /* Tailwind space-x-2 equivalent */
            z-index: 10;
        }
        .carousel-dot {
            width: 0.75rem; /* Tailwind w-3 */
            height: 0.75rem; /* Tailwind h-3 */
            background-color: rgba(255, 255, 255, 0.5);
            border-radius: 9999px; /* Tailwind rounded-full */
            cursor: pointer;
            transition: background-color 0.3s ease;
        }
        .carousel-dot.active {
            background-color: white;
        }
    </style>
</head>
<body class="bg-gray-900 text-white">

    <!-- Konami Code Easter Egg Element -->
    <img src="outfront-logo.png" alt="OutFront Logo" id="konami-logo">

    <!-- Header -->
    <header class="fixed top-0 left-0 right-0 z-50 bg-gray-900/80 backdrop-blur-md">
        <div class="container mx-auto px-4 sm:px-6 py-3 flex justify-between items-center">
            <!-- Logo Group -->
            <div class="flex items-center space-x-3 sm:space-x-4">
                <a href="https://www.socoequality.org/" target="_blank" rel="noopener noreferrer" class="flex-shrink-0 transition-opacity hover:opacity-80">
                  <img src="https://images.squarespace-cdn.com/content/v1/5b5776b2af20962f0511952c/e6e59ae4-1fb2-4679-8f03-4da69779a43c/SCEAlogo300dpiPRINT.png?format=1500w" alt="Southern Colorado Equality Alliance Logo" class="h-14 w-auto">
                </a>
                <div class="w-px h-10 bg-gray-600"></div>
                <a href="#" class="flex-shrink-0 transition-opacity hover:opacity-80">
                  <img src="outfront-logo.png" alt="OutFront Youth Group Logo" class="h-12 w-auto" onerror="this.onerror=null;this.src='https://placehold.co/200x60/111827/FFF?text=OutFront';">
                </a>
            </div>

            <!-- Desktop Navigation -->
            <nav class="hidden md:flex items-center space-x-6 text-lg">
                <a href="#about" class="nav-link hover:text-sky-400 transition-colors">About</a>
                <a href="#meetings" class="nav-link hover:text-sky-400 transition-colors">Meetings</a>
                <a href="#calendar" class="nav-link hover:text-sky-400 transition-colors">Calendar</a>
                <a href="#resources" class="nav-link hover:text-sky-400 transition-colors">Resources</a>
                <a href="#contact" class="nav-link hover:text-sky-400 transition-colors">Contact</a>
                <a href="#support" class="nav-link bg-green-500 text-white font-bold py-2 px-5 rounded-full hover:bg-green-600 transition-colors">
                    Donate
                </a>
            </nav>

            <!-- Mobile Menu Button -->
            <button id="mobile-menu-button" class="md:hidden">
                <i data-lucide="menu" class="h-6 w-6"></i>
            </button>
        </div>

        <!-- Mobile Menu -->
        <div id="mobile-menu" class="hidden md:hidden px-6 pb-4">
             <a href="#about" class="nav-link block py-2 hover:text-sky-400 transition-colors">About</a>
             <a href="#meetings" class="nav-link block py-2 hover:text-sky-400 transition-colors">Meetings</a>
             <a href="#calendar" class="nav-link block py-2 hover:text-sky-400 transition-colors">Calendar</a>
             <a href="#resources" class="nav-link block py-2 hover:text-sky-400 transition-colors">Resources</a>
             <a href="#contact" class="nav-link block py-2 hover:text-sky-400 transition-colors">Contact</a>
             <a href="#support" class="nav-link block mt-2 bg-green-500 text-white font-bold py-2 px-4 rounded-full text-center">
                Donate
             </a>
        </div>
    </header>

    <!-- Main Content -->
    <main class="pb-16">
        <section class="hero-bg text-white relative text-center overflow-hidden pt-24">
            <div class="container mx-auto px-6 py-32 md:py-48 relative z-10">
                <h2 class="text-4xl md:text-7xl font-extrabold leading-tight drop-shadow-xl">Find Your People. Find Your Place.</h2>
                <p class="mt-6 text-lg md:text-2xl max-w-3xl mx-auto drop-shadow-lg">Welcome to OutFront, a safe and inclusive space for LGBTQ+ youth and allies (ages 13 to 20) in Southern Colorado.</p>
                <div class="mt-10 flex flex-col items-center space-y-4">
                    <a href="#meetings" class="nav-link bg-white text-gray-900 font-bold py-4 px-8 rounded-full text-lg hover:bg-opacity-90 transform hover:scale-105 transition-transform">
                        Join Us This Friday!
                    </a>
                    <a href="#contact" class="nav-link inline-block bg-black/65 backdrop-blur-sm border-2 border-white text-white font-bold py-3 px-8 rounded-full text-lg hover:bg-white/20 transform hover:scale-105 transition-all">
                        Volunteer for <span class="rainbow-text">Pride!</span>
                    </a>
                </div>
            </div>
        </section>

        <div id="about" class="angled-section" style="background-color: #7f1d1d;"> <!-- Muted Red -->
            <div class="section-content">
                <section class="container mx-auto px-6 fade-in-section">
                    <div class="text-center mb-12">
                        <h3 class="text-4xl font-bold text-red-300">Who We Are</h3>
                        <p class="mt-2 text-lg text-red-200">A program of the Southern Colorado Equality Alliance</p>
                    </div>
                    <div class="max-w-4xl mx-auto text-lg text-center leading-relaxed">
                        <p>OutFront is more than just a youth group; it's a community. We provide a supportive, confidential, and fun environment where you can be your authentic self. Our mission is to empower LGBTQ+ young people, foster friendships, and build a stronger, more inclusive Southern Colorado. We believe in respect, community, and celebrating diversity.</p>
                    </div>

                    <!-- Carousel Start -->
                    <div id="who-we-are-carousel" class="carousel-container mt-12">
                        <div class="carousel-slides">
                            <div class="carousel-slide">
                                <img src="images/carousel-image-1.jpg" alt="OutFront Youth Group Activity Image 1">
                            </div>
                            <div class="carousel-slide">
                                <img src="images/carousel-image-2.jpg" alt="OutFront Youth Group Activity Image 2">
                            </div>
                            <div class="carousel-slide">
                                <img src="images/carousel-image-3.jpg" alt="OutFront Youth Group Activity Image 3">
                            </div>
                            <div class="carousel-slide">
                                <img src="images/carousel-image-4.jpg" alt="OutFront Youth Group Activity Image 4">
                            </div>
                            <div class="carousel-slide">
                                <video src="https://cloud.outfrontyouth.org/s/dGbswkNrE9nwt5y/preview" controls autoplay muted loop poster="images/video-poster-1.jpg" style="width: 100%; height: auto; max-height: 500px; object-fit: cover;"></video>
                            </div>
                            <div class="carousel-slide">
                                <video src="https://cloud.outfrontyouth.org/s/yzp8rDYdcGo4sG7/preview" controls autoplay muted loop poster="images/video-poster-2.jpg" style="width: 100%; height: auto; max-height: 500px; object-fit: cover;"></video>
                            </div>
                            <div class="carousel-slide">
                                <video src="https://cloud.outfrontyouth.org/s/PQxFjoLmjagpAYM/preview" controls autoplay muted loop poster="images/video-poster-3.jpg" style="width: 100%; height: auto; max-height: 500px; object-fit: cover;"></video>
                            </div>
                            <div class="carousel-slide">
                                <video src="https://cloud.outfrontyouth.org/s/64wkXzbnLaH82HG/preview" controls autoplay muted loop poster="images/video-poster-4.jpg" style="width: 100%; height: auto; max-height: 500px; object-fit: cover;"></video>
                            </div>
                        </div>
                        <button class="carousel-button prev">
                            <i data-lucide="chevron-left" class="h-6 w-6"></i>
                        </button>
                        <button class="carousel-button next">
                            <i data-lucide="chevron-right" class="h-6 w-6"></i>
                        </button>
                        <div class="carousel-dots">
                            <!-- Dots will be generated by JavaScript -->
                        </div>
                    </div>
                    <!-- Carousel End -->

                </section>
            </div>
        </div>

        <div id="meetings" class="angled-section alt" style="background-color: #7c2d12;"> <!-- Muted Orange -->
            <div class="section-content">
                <section class="container mx-auto px-6 fade-in-section">
                    <div class="text-center mb-12">
                        <h3 class="text-4xl font-bold text-orange-300">Weekly Meetings</h3>
                        <p class="mt-2 text-lg text-orange-200">Connect, share, and have fun with us.</p>
                    </div>
                    <div class="flex flex-col md:flex-row gap-8 items-center">
                        <div class="md:w-1/2">
                             <div class="glass-card rounded-2xl p-8 text-center shadow-2xl">
                                <div class="flex justify-center mb-4">
                                    <i data-lucide="calendar-days" class="h-12 w-12 text-yellow-300"></i>
                                </div>
                                <h4 class="text-2xl font-bold mb-2">When?</h4>
                                <p id="meeting-day" class="text-xl"></p>
                                <p id="meeting-time" class="text-xl font-bold"></p>
                            </div>
                            <div class="glass-card rounded-2xl p-8 text-center shadow-2xl mt-8">
                                 <div class="flex justify-center mb-4">
                                    <i data-lucide="map-pin" class="h-12 w-12 text-red-400"></i>
                                </div>
                                <h4 class="text-2xl font-bold mb-2">Where?</h4>
                                <p id="meeting-location-name" class="text-xl"></p>
                                <p id="meeting-location-address" class="text-lg text-gray-300"></p>
                            </div>
                        </div>
                        <div class="md:w-1/2 h-80 md:h-96 rounded-2xl overflow-hidden shadow-2xl map-container">
                            <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3132.6496503999365!2d-104.61578112361985!3d38.26443088380279!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x8713a2e2914004b9%3A0x7d89241123272714!2s128%20S%20Union%20Ave%2C%20Pueblo%2C%20CO%2081003!5e0!3m2!1sen!2sus!4v1750924868065!5m2!1sen!2sus" width="600" height="450" style="border:0;" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>
                        </div>
                    </div>
                </section>
            </div>
        </div>

        <div id="calendar" class="angled-section" style="background-color: #713f12;"> <!-- Muted Yellow -->
             <div class="section-content">
                <section class="container mx-auto px-6 fade-in-section">
                    <div class="text-center mb-12">
                        <h3 class="text-4xl font-bold text-yellow-300">Event Calendar</h3>
                        <p class="mt-2 text-lg text-yellow-200">Our upcoming meetings and special events, live from our calendar!</p>
                    </div>
                    <div class="max-w-2xl mx-auto bg-gray-900/50 p-6 rounded-2xl shadow-lg">
                        <div class="flex justify-between items-center mb-4">
                            <div class="flex items-center">
                                <button id="prev-month" class="p-2 rounded-full hover:bg-gray-700 transition-colors"><i data-lucide="chevron-left" class="h-6 w-6"></i></button>
                                <h4 id="month-year" class="text-2xl font-bold mx-4"></h4>
                                <button id="next-month" class="p-2 rounded-full hover:bg-gray-700 transition-colors"><i data-lucide="chevron-right" class="h-6 w-6"></i></button>
                            </div>
                            <div class="flex items-center space-x-2">
                                <a id="download-pdf-btn" href="#" target="_blank" class="p-2 rounded-full hover:bg-gray-700 transition-colors" title="Download Flyer as PDF">
                                    <i data-lucide="download" class="h-6 w-6"></i>
                                </a>
                            </div>
                        </div>
                        <div id="calendar-grid" class="grid grid-cols-7 gap-1 text-center">
                            <!-- Calendar will be generated by JS -->
                        </div>
                        <div class="mt-4 flex items-center justify-between">
                            <label for="color-logo-toggle" class="flex items-center cursor-pointer text-sm text-gray-400">
                                <input type="checkbox" id="color-logo-toggle" class="form-checkbox h-4 w-4 text-green-500 bg-gray-800 border-gray-600 rounded focus:ring-green-500">
                                <span class="ml-2">Use Color Logo on Flyer</span>
                            </label>
                            <div class="text-right">
                                 <a href="webcal://cloud.outfrontyouth.org/remote.php/dav/public-calendars/o4BqHRSHaDJjiqjs?export" class="inline-flex items-center bg-sky-500 text-white font-bold py-2 px-4 rounded-full text-sm hover:bg-sky-600 transition-colors">
                                    <i data-lucide="calendar-plus" class="h-4 w-4 mr-2"></i> Subscribe
                                 </a>
                                 <button id="how-to-subscribe-btn" class="text-xs text-gray-500 hover:text-sky-400 mt-1 transition-colors">How do I subscribe?</button>
                            </div>
                        </div>
                    </div>
                </section>
            </div>
        </div>
        
        <div id="resources" class="angled-section alt" style="background-color: #166534;"> <!-- Muted Green -->
            <div class="section-content">
                <section class="container mx-auto px-6 fade-in-section">
                    <div class="text-center mb-12">
                        <h3 class="text-4xl font-bold text-green-300">Community Resources</h3>
                        <p class="mt-2 text-lg text-green-200">You are not alone. Help and support are available.</p>
                    </div>
                    <div id="resources-grid" class="max-w-6xl mx-auto grid md:grid-cols-2 lg:grid-cols-3 gap-8 justify-center text-center">
                        <!-- Resources will be generated here by JavaScript -->
                    </div>
                </section>
            </div>
        </div>

        <div id="support" class="angled-section" style="background-color: #1e3a8a;"> <!-- Muted Blue -->
            <div class="section-content">
                <section class="container mx-auto px-6 fade-in-section">
                     <div class="text-center mb-12">
                        <h3 class="text-4xl font-bold text-blue-300">Support Our Youth</h3>
                    </div>
                    <div class="max-w-2xl mx-auto text-center">
                        <p class="text-xl text-blue-200 mb-8">
                            Your generous donation to the Southern Colorado Equality Alliance (SCEA) directly funds OutFront, our weekly program for LGBTQ+ youth. Contributions are used to provide a safe and welcoming space with snacks, art supplies, special event materials, and other essential resources. Thank you for supporting youth in Southern Colorado!
                        </p>
                        <a href="https://www.paypal.com/donate/?hosted_button_id=ZQ8MXUGEV7EQQ&source=url" target="_blank" rel="noopener noreferrer" class="inline-block bg-green-500 text-white font-bold text-xl py-4 px-10 rounded-full hover:bg-green-600 transition-colors transform hover:scale-105">
                            <i data-lucide="heart" class="inline-block h-6 w-6 mr-2"></i> Donate via PayPal
                        </a>
                    </div>
                </section>
            </div>
        </div>

        <div id="contact" class="angled-section alt" style="background-color: #581c87;"> <!-- Muted Purple -->
            <div class="section-content">
                <section class="container mx-auto px-6 fade-in-section">
                    <div class="text-center mb-12">
                        <h3 class="text-4xl font-bold text-purple-300">Get in Touch</h3>
                        <p class="mt-2 text-lg text-purple-200">We'd love to hear from you!</p>
                    </div>

                    <!-- Volunteer Section -->
                    <div class="max-w-4xl mx-auto mb-16">
                        <div class="bg-gray-900/50 rounded-2xl p-8 shadow-lg text-center">
                            <h4 class="text-3xl font-bold text-amber-400 mb-6">Volunteer With Us!</h4>
                            <p class="text-gray-300 mb-8 max-w-2xl mx-auto">
                                We rely on the passion and dedication of our volunteers. Click one of the opportunities below to open the specific sign-up form!
                            </p>
                            <div class="grid md:grid-cols-2 gap-8 text-left">
                                <a id="pride-volunteer-link" href="#" target="_blank" rel="noopener noreferrer" class="interactive-card bg-gray-900 p-6 rounded-xl flex flex-col hover:ring-2 hover:ring-amber-400">
                                    <div class="flex items-center mb-3">
                                        <i data-lucide="sparkles" class="h-8 w-8 text-amber-400 mr-3 flex-shrink-0"></i>
                                        <h5 class="text-xl font-bold">Pueblo Pride 2025 Volunteers</h5>
                                    </div>
                                    <p class="text-gray-400 flex-grow">
                                       Help us make this year's Pueblo Pride a success! We need volunteers for various roles, including helping at the OutFront youth group booth.
                                    </p>
                                </a>
                                <a id="facilitator-volunteer-link" href="#" target="_blank" rel="noopener noreferrer" class="interactive-card bg-gray-900 p-6 rounded-xl flex flex-col hover:ring-2 hover:ring-amber-400">
                                    <div class="flex items-center mb-3">
                                        <i data-lucide="heart-handshake" class="h-8 w-8 text-amber-400 mr-3 flex-shrink-0"></i>
                                        <h5 class="text-xl font-bold">Volunteer Facilitators</h5>
                                    </div>
                                    <p class="text-gray-400 flex-grow">
                                        Help guide our weekly meetings and create a safe, supportive environment for our youth. Adult facilitators are a vital part of our team.
                                    </p>
                                    <p class="text-sm text-rose-400 mt-3">*A background check is required for this role.</p>
                                </a>
                            </div>
                        </div>
                    </div>

                    <div class="max-w-2xl mx-auto text-center">
                         <p class="text-lg text-gray-400 mb-6">For general questions, use our main contact form or call us at <span id="contact-phone"></span>.</p>
                        <a id="general-contact-link" href="#" target="_blank" rel="noopener noreferrer" class="inline-block bg-rose-500 text-white font-bold text-xl py-4 px-10 rounded-full hover:bg-rose-600 transition-colors transform hover:scale-105">
                            <i data-lucide="send" class="inline-block h-6 w-6 mr-2"></i> Open General Contact Form
                        </a>
                    </div>
                </section>
            </div>
        </div>
    </main>

    <div id="event-modal" class="fixed inset-0 bg-black bg-opacity-70 z-50 hidden items-center justify-center p-4">
        <div class="bg-gray-800 text-white p-6 rounded-2xl shadow-xl max-w-lg w-full relative max-h-[80vh] overflow-y-auto">
            <button id="modal-close-btn" class="absolute top-3 right-3 p-1 rounded-full hover:bg-gray-700 transition-colors">
                <i data-lucide="x" class="h-6 w-6"></i>
            </button>
            <h3 id="modal-main-title" class="text-2xl font-bold mb-4 text-orange-400">Events for Today</h3>
            <div id="modal-events-container" class="space-y-4"></div>
        </div>
    </div>

    <div id="subscribe-modal" class="fixed inset-0 bg-black bg-opacity-70 z-50 hidden items-center justify-center p-4">
        <div class="bg-gray-800 text-white p-6 rounded-2xl shadow-xl max-w-2xl w-full relative">
            <button id="subscribe-modal-close-btn" class="absolute top-3 right-3 p-1 rounded-full hover:bg-gray-700 transition-colors">
                <i data-lucide="x" class="h-6 w-6"></i>
            </button>
            <h3 class="text-xl font-bold mb-4 text-sky-400">How to Subscribe to the Calendar</h3>
            <p class="mb-4 text-gray-300">Subscribing to our calendar will automatically add all our events to your personal calendar and keep them updated. Simply click the "Subscribe" button on your device. If that doesn't work, you may need to copy the link and add it manually:</p>
            <div class="space-y-4 text-sm">
                <div>
                    <h4 class="font-bold">Google Calendar (Desktop):</h4>
                    <ol class="list-decimal list-inside text-gray-400">
                        <li>On the left side, find "Other calendars" and click the Add (+) button.</li>
                        <li>Select "From URL".</li>
                        <li>Paste this link: `https://cloud.outfrontyouth.org/remote.php/dav/public-calendars/o4BqHRSHaDJjiqjs?export`</li>
                        <li>Click "Add calendar".</li>
                    </ol>
                </div>
                <div>
                    <h4 class="font-bold">Apple Calendar (iPhone/iPad):</h4>
                    <ol class="list-decimal list-inside text-gray-400">
                        <li>Go to Settings > Calendar > Accounts > Add Account.</li>
                        <li>Tap "Other", then "Add Subscribed Calendar".</li>
                        <li>Paste the link above and tap "Next".</li>
                    </ol>
                </div>
            </div>
        </div>
    </div>

    <footer class="bg-gray-900 py-8">
        <div class="container mx-auto px-6 text-center text-gray-400">
            <p>&copy; <span id="year"></span> OutFront Youth Group & Southern Colorado Equality Alliance. All Rights Reserved.</p>
            <div class="flex justify-center items-center space-x-6 mt-4">
                 <a href="https://www.facebook.com/outfrontyouth" target="_blank" rel="noopener noreferrer" class="hover:opacity-80 transition-opacity"><i data-lucide="facebook" class="h-6 w-6"></i></a>
            </div>
        </div>
    </footer>

    <script src="config.js"></script>
    <script>
        // --- INITIALIZATION ---
        // This function runs once the page is loaded
        document.addEventListener('DOMContentLoaded', () => {
            // Initialize Lucide Icons
            lucide.createIcons();
            
            // Populate page with data from config.js
            populateFromConfig();

            // Setup all event listeners
            setupEventListeners();

            // Load dynamic data
            updateCalendar(new Date());
            loadResources();

            // Initialize "Who We Are" Carousel
            initializeWhoWeAreCarousel();
        });

        // --- WHO WE ARE CAROUSEL LOGIC ---
        function initializeWhoWeAreCarousel() {
            const carousel = document.getElementById('who-we-are-carousel');
            if (!carousel) return;

            const slidesContainer = carousel.querySelector('.carousel-slides');
            const slides = Array.from(carousel.querySelectorAll('.carousel-slide'));
            const prevButton = carousel.querySelector('.carousel-button.prev');
            const nextButton = carousel.querySelector('.carousel-button.next');
            const dotsContainer = carousel.querySelector('.carousel-dots');
            let currentIndex = 0;
            const totalSlides = slides.length;

            if (totalSlides === 0) return;

            // Create dots
            slides.forEach((_, index) => {
                const dot = document.createElement('button');
                dot.classList.add('carousel-dot');
                if (index === 0) dot.classList.add('active');
                dot.addEventListener('click', () => showSlide(index));
                dotsContainer.appendChild(dot);
            });
            const dots = Array.from(dotsContainer.querySelectorAll('.carousel-dot'));

            function showSlide(index) {
                currentIndex = (index + totalSlides) % totalSlides; // Loop around
                slidesContainer.style.transform = `translateX(-${currentIndex * 100}%)`;

                dots.forEach(dot => dot.classList.remove('active'));
                dots[currentIndex].classList.add('active');

                // Handle video play/pause
                slides.forEach((slide, index) => {
                    const video = slide.querySelector('video');
                    if (video) {
                        if (index === currentIndex) {
                            video.play().catch(error => console.error("Error attempting to play video:", error));
                        } else {
                            video.pause();
                        }
                    }
                });

                // Re-initialize lucide icons if they are part of the slide content and get removed/re-added
                // For this carousel, only buttons have icons, and they are persistent.
            }

            prevButton.addEventListener('click', () => {
                showSlide(currentIndex - 1);
            });

            nextButton.addEventListener('click', () => {
                showSlide(currentIndex + 1);
            });

            // Initialize Lucide icons for carousel buttons
            lucide.createIcons({
                nodes: [
                    prevButton.querySelector('i'),
                    nextButton.querySelector('i')
                ]
            });

            // Show the first slide initially
            showSlide(0);
        }

        // --- CONFIGURATION & DATA POPULATION ---
        function populateFromConfig() {
            // Meeting Details
            document.getElementById('meeting-day').textContent = config.meetingDetails.day;
            document.getElementById('meeting-time').textContent = config.meetingDetails.time;
            document.getElementById('meeting-location-name').textContent = config.meetingDetails.locationName;
            document.getElementById('meeting-location-address').textContent = config.meetingDetails.locationAddress;
            
            // Contact Info
            document.getElementById('contact-phone').textContent = config.contactInfo.phone;
            
            // Form Links
            document.getElementById('pride-volunteer-link').href = config.formLinks.prideVolunteer;
            document.getElementById('facilitator-volunteer-link').href = config.formLinks.facilitatorVolunteer;
            document.getElementById('general-contact-link').href = config.formLinks.generalContact;

            // Footer
            document.getElementById('year').textContent = new Date().getFullYear();
        }

        // --- EVENT LISTENERS ---
        function setupEventListeners() {
            // Mobile Menu Logic
            const mobileMenuButton = document.getElementById('mobile-menu-button');
            const mobileMenu = document.getElementById('mobile-menu');
            mobileMenuButton.addEventListener('click', () => {
                mobileMenu.classList.toggle('hidden');
            });
            
            // Smooth Scrolling for Nav Links
            document.querySelectorAll('.nav-link').forEach(anchor => {
                anchor.addEventListener('click', function (e) {
                    e.preventDefault();
                    mobileMenu.classList.add('hidden');
                    const targetId = this.getAttribute('href');
                    if (targetId === '#') {
                         window.scrollTo({ top: 0, behavior: 'smooth' });
                    } else {
                        const targetElement = document.querySelector(targetId);
                        if (targetElement) {
                            targetElement.scrollIntoView({ behavior: 'smooth' });
                        }
                    }
                });
            });

            // Calendar Controls
            document.getElementById('prev-month').addEventListener('click', () => {
                currentDate.setMonth(currentDate.getMonth() - 1);
                generateCalendar(currentDate);
            });
            document.getElementById('next-month').addEventListener('click', () => {
                currentDate.setMonth(currentDate.getMonth() + 1);
                generateCalendar(currentDate);
            });
            document.getElementById('color-logo-toggle').addEventListener('change', updateFlyerLinks);

            // Modal Controls
            document.getElementById('modal-close-btn').addEventListener('click', closeModal);
            document.getElementById('event-modal').addEventListener('click', (e) => {
                if (e.target === document.getElementById('event-modal')) closeModal();
            });
            document.getElementById('how-to-subscribe-btn').addEventListener('click', () => {
                document.getElementById('subscribe-modal').classList.remove('hidden');
                document.getElementById('subscribe-modal').classList.add('flex');
            });
            document.getElementById('subscribe-modal-close-btn').addEventListener('click', () => {
                 document.getElementById('subscribe-modal').classList.add('hidden');
                 document.getElementById('subscribe-modal').classList.remove('flex');
            });
             document.getElementById('subscribe-modal').addEventListener('click', (e) => {
                if (e.target === document.getElementById('subscribe-modal')) {
                    document.getElementById('subscribe-modal').classList.add('hidden');
                    document.getElementById('subscribe-modal').classList.remove('flex');
                }
            });
            
            // On-scroll animation observer
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('is-visible');
                    }
                });
            }, { threshold: 0.1 });

            document.querySelectorAll('.fade-in-section').forEach(section => {
                observer.observe(section);
            });
        }
        
        // --- CALENDAR LOGIC ---
        const monthYearEl = document.getElementById('month-year');
        const calendarGridEl = document.getElementById('calendar-grid');
        let currentDate = new Date();
        let calendarEvents = [];

        const fetchEvents = async () => {
            try {
                const response = await fetch('./download-flyer.php?json=true');
                if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);
                calendarEvents = await response.json();
                if (calendarEvents.error) {
                    console.error("Calendar Fetch Error:", calendarEvents.error);
                    calendarEvents = [];
                }
            } catch (e) {
                console.error("Could not fetch calendar events:", e);
                calendarEvents = [];
            }
        };

        const updateFlyerLinks = () => {
            const monthString = currentDate.toLocaleDateString('en-US', { month: 'long' }).toLowerCase();
            const year = currentDate.getFullYear();
            let params = `?month=${monthString}&year=${year}`;
            if (document.getElementById('color-logo-toggle').checked) {
                params += '&color=true';
            }
            document.getElementById('download-pdf-btn').href = `download-flyer.php${params}`;
        };

        const generateCalendar = (date) => {
            calendarGridEl.innerHTML = '<div class="col-span-7 text-center p-8">Loading events...</div>';
            const month = date.getMonth();
            const year = date.getFullYear();
            monthYearEl.textContent = date.toLocaleDateString('en-US', { month: 'long', year: 'numeric' });
            updateFlyerLinks(); 
            const firstDayOfMonth = new Date(year, month, 1).getDay();
            const daysInMonth = new Date(year, month + 1, 0).getDate();
            calendarGridEl.innerHTML = '';
            const dayNames = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];
            dayNames.forEach(day => {
                const dayNameEl = document.createElement('div');
                dayNameEl.className = "font-bold text-gray-400 text-sm";
                dayNameEl.textContent = day;
                calendarGridEl.appendChild(dayNameEl);
            });
            for (let i = 0; i < firstDayOfMonth; i++) calendarGridEl.appendChild(document.createElement('div'));
            for (let i = 1; i <= daysInMonth; i++) {
                const dayCell = document.createElement('div');
                dayCell.className = "p-2 rounded-full flex items-center justify-center h-10 w-10 mx-auto transition-colors";
                dayCell.textContent = i;
                const cellDateStr = `${year}-${String(month + 1).padStart(2, '0')}-${String(i).padStart(2, '0')}`;
                const eventsForDay = calendarEvents.filter(event => event.date === cellDateStr);
                if (eventsForDay.length > 0) {
                    dayCell.classList.add('calendar-event', 'font-bold', 'cursor-pointer', 'hover:bg-green-300');
                    dayCell.title = eventsForDay.map(e => e.summary).join(', ');
                    dayCell.addEventListener('click', () => {
                        const modalEventsContainer = document.getElementById('modal-events-container');
                        modalEventsContainer.innerHTML = ''; 
                        const dateForTitle = new Date(year, month, i);
                        document.getElementById('modal-main-title').textContent = `Events for ${dateForTitle.toLocaleDateString('en-US', { weekday: 'long', month: 'long', day: 'numeric' })}`;
                        eventsForDay.forEach(eventData => {
                            const eventEntry = document.createElement('div');
                            eventEntry.className = 'event-entry';
                            let content = `<h3 class="text-xl font-bold mb-2 text-green-400">${eventData.summary || 'Event'}</h3>`;
                            if (eventData.startTime) {
                                content += `<div class="mb-2"><h4 class="font-bold text-gray-400 text-sm uppercase tracking-wider">Time</h4><p class="text-lg">${eventData.startTime} - ${eventData.endTime}</p></div>`;
                            } else {
                                content += `<div class="mb-2"><h4 class="font-bold text-gray-400 text-sm uppercase tracking-wider">Time</h4><p class="text-lg">All-day event</p></div>`;
                            }
                            if (eventData.description) {
                                content += `<div class="mb-2"><h4 class="font-bold text-gray-400 text-sm uppercase tracking-wider">Details</h4><p class="event-description text-lg">${eventData.description}</p></div>`;
                            }
                            if (eventData.location) {
                                content += `<div><h4 class="font-bold text-gray-400 text-sm uppercase tracking-wider">Location</h4><p class="text-lg">${eventData.location}</p></div>`;
                            }
                            eventEntry.innerHTML = content;
                            modalEventsContainer.appendChild(eventEntry);
                        });
                        document.getElementById('event-modal').classList.remove('hidden');
                        document.getElementById('event-modal').classList.add('flex');
                    });
                }
                const today = new Date();
                if (today.getFullYear() === year && today.getMonth() === month && today.getDate() === i) {
                     dayCell.classList.add('bg-sky-500', 'text-white');
                }
                calendarGridEl.appendChild(dayCell);
            }
        };
        const updateCalendar = async (date) => {
            await fetchEvents();
            generateCalendar(date);
        };
        const closeModal = () => {
            document.getElementById('event-modal').classList.add('hidden');
            document.getElementById('event-modal').classList.remove('flex');
        };

        // --- DYNAMIC RESOURCES LOGIC ---
        const resourcesGrid = document.getElementById('resources-grid');
        const parseCSV = (csvText) => {
            const lines = csvText.trim().split('\n');
            if (lines.length < 2) return [];
            const headers = lines[0].split(',').map(h => h.trim());
            const rows = lines.slice(1).map(line => {
                const values = line.match(/(".*?"|[^",\r]+)(?=\s*,|\s*$)/g) || [];
                return headers.reduce((obj, header, index) => {
                    let value = values[index] ? values[index].trim() : '';
                    if (value.startsWith('"') && value.endsWith('"')) {
                        value = value.substring(1, value.length - 1);
                    }
                    value = value.replace(/""/g, '"');
                    obj[header] = value;
                    return obj;
                }, {});
            });
            return rows;
        };
        const generateResources = (resources) => {
            resourcesGrid.innerHTML = '';
            resources.forEach(resource => {
                if (!resource.title) return;
                const resourceLink = document.createElement('a');
                resourceLink.href = resource.url;
                resourceLink.target = '_blank';
                resourceLink.rel = 'noopener noreferrer';
                resourceLink.className = 'interactive-card bg-gray-900/50 p-8 rounded-2xl shadow-lg hover:bg-gray-800/50 transition-colors group';
                resourceLink.innerHTML = `
                    <i data-lucide="${resource.icon || 'help-circle'}" class="h-12 w-12 text-teal-300 mx-auto mb-4 group-hover:scale-110 transition-transform"></i>
                    <h4 class="text-2xl font-bold mb-2">${resource.title}</h4>
                    <p class="text-gray-400">${resource.description}</p>
                `;
                resourcesGrid.appendChild(resourceLink);
            });
            lucide.createIcons();
        };
        const loadResources = async () => {
            const proxyUrl = `./resource-proxy.php?url=${encodeURIComponent(config.resourcesUrl)}`;
            resourcesGrid.innerHTML = `<p class="text-gray-400 col-span-full">Loading resources...</p>`;
            try {
                const response = await fetch(proxyUrl);
                if (!response.ok) {
                    throw new Error(`Network response was not ok`);
                }
                const csvText = await response.text();
                const resources = parseCSV(csvText);
                generateResources(resources);
            } catch (error) {
                console.error('Failed to load dynamic resources, using fallback:', error);
                resourcesGrid.innerHTML = `<p class="text-yellow-400 col-span-full mb-4">Could not load live resources. Showing default list.</p>`;
                generateResources(config.fallbackResources);
            }
        };

        // --- KONAMI CODE EASTER EGG ---
        const konamiCode = [
            'ArrowUp', 'ArrowUp', 'ArrowDown', 'ArrowDown',
            'ArrowLeft', 'ArrowRight'
        ];
        let konamiIndex = 0;
        let animationTimeout;

        document.addEventListener('keydown', (e) => {
            if (e.key === konamiCode[konamiIndex]) {
                konamiIndex++;
                if (konamiIndex === konamiCode.length) {
                    konamiIndex = 0; // Reset for next time
                    const logo = document.getElementById('konami-logo');

                    // Set the logo image source from config
                    if (config && config.konamiLogoUrl) {
                        logo.src = config.konamiLogoUrl;
                    } else {
                        logo.src = 'outfront-logo.png'; // Fallback if not defined
                    }

                    // Clear any existing animation timeout
                    if (animationTimeout) {
                        clearTimeout(animationTimeout);
                    }

                    // Reset animation by removing and re-adding the class/style
                    logo.style.animation = 'none'; // Temporarily remove animation
                    logo.offsetHeight; // Trigger reflow
                    logo.style.animation = ''; // Re-add animation from CSS

                    logo.style.display = 'block'; // Show the logo

                    // Set a timeout to hide the logo after the animation completes (5s)
                    animationTimeout = setTimeout(() => {
                        logo.style.display = 'none';
                    }, 5000);
                }
            } else {
                konamiIndex = 0; // Reset if wrong key is pressed
            }
        });
    </script>
</body>
</html>
